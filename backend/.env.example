# ========================================
# Effisio バックエンド環境変数設定
# ========================================
# このファイルをコピーして .env.local を作成してください
# cp .env.example .env.local

# ========================================
# アプリケーション設定
# ========================================
APP_NAME=Effisio
APP_VERSION=1.0.0
ENV=development
# ENV: development, staging, production

# ========================================
# サーバー設定
# ========================================
SERVER_HOST=0.0.0.0
SERVER_PORT=8080
# 本番環境では HTTPS を使用
# SERVER_HTTPS=true
# SERVER_CERT_FILE=/path/to/cert.pem
# SERVER_KEY_FILE=/path/to/key.pem

# ========================================
# データベース設定（PostgreSQL）
# ========================================
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=effisio_dev
DB_SSLMODE=disable
# DB_SSLMODE: disable (開発), require (本番)

# 接続プール設定
DB_MAX_OPEN_CONNS=25
DB_MAX_IDLE_CONNS=5
DB_CONN_MAX_LIFETIME=300
# 単位: 秒

# ========================================
# Redis設定（キャッシュ）
# ========================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
# Redis DB: 0-15

# Redis接続プール
REDIS_POOL_SIZE=10
REDIS_MIN_IDLE_CONNS=5

# ========================================
# JWT認証設定
# ========================================
# 重要: 本番環境では必ず強力なシークレットキーを使用してください
# 生成例: openssl rand -base64 64
JWT_SECRET=your-secret-key-change-this-in-production-use-openssl-rand-base64-64

# トークン有効期限（秒）
JWT_ACCESS_TOKEN_EXPIRATION=3600
# 1時間 = 3600秒

JWT_REFRESH_TOKEN_EXPIRATION=2592000
# 30日 = 2592000秒

# JWT署名アルゴリズム
# JWT_ALGORITHM=HS256
# 本番環境では RS256 を推奨

# RS256を使用する場合
# JWT_PRIVATE_KEY_PATH=/path/to/private.pem
# JWT_PUBLIC_KEY_PATH=/path/to/public.pem

# ========================================
# パスワードハッシング設定
# ========================================
# bcrypt cost (10-12推奨、数値が大きいほど安全だが遅い)
BCRYPT_COST=12

# ========================================
# ロギング設定
# ========================================
LOG_LEVEL=debug
# LOG_LEVEL: debug, info, warn, error

LOG_FORMAT=json
# LOG_FORMAT: json, console

LOG_OUTPUT=stdout
# LOG_OUTPUT: stdout, file, both

# ファイル出力する場合
# LOG_FILE_PATH=/var/log/effisio/app.log
# LOG_FILE_MAX_SIZE=100
# 単位: MB
# LOG_FILE_MAX_BACKUPS=10
# LOG_FILE_MAX_AGE=30
# 単位: 日

# ========================================
# CORS設定
# ========================================
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080
# カンマ区切りで複数指定可能
# 本番環境: https://app.example.com

CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=86400
# 単位: 秒

# ========================================
# レート制限
# ========================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100
# 未認証ユーザー: 100リクエスト/分

RATE_LIMIT_AUTHENTICATED_REQUESTS_PER_MINUTE=1000
# 認証済みユーザー: 1000リクエスト/分

# ========================================
# セッション設定
# ========================================
SESSION_TIMEOUT=3600
# セッションタイムアウト（秒）

SESSION_COOKIE_NAME=effisio_session
SESSION_COOKIE_SECURE=false
# 本番環境では true に設定（HTTPS必須）

SESSION_COOKIE_HTTP_ONLY=true
SESSION_COOKIE_SAME_SITE=lax
# lax, strict, none

# ========================================
# キャッシュ設定
# ========================================
CACHE_ENABLED=true
CACHE_DEFAULT_TTL=300
# デフォルトキャッシュ有効期限（秒）

# 個別キャッシュTTL
CACHE_USER_TTL=300
# ユーザー情報: 5分

CACHE_ROLE_TTL=3600
# ロール権限: 1時間

CACHE_DASHBOARD_TTL=60
# ダッシュボード統計: 1分

# ========================================
# ファイルアップロード設定
# ========================================
UPLOAD_MAX_SIZE=10485760
# 最大アップロードサイズ（バイト）10MB = 10485760

UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/gif,application/pdf
# 許可するMIMEタイプ（カンマ区切り）

UPLOAD_PATH=/tmp/uploads
# アップロードファイルの保存先

# ========================================
# メール設定（通知機能用 - 将来実装）
# ========================================
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USERNAME=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# SMTP_FROM=noreply@effisio.com
# SMTP_TLS=true

# ========================================
# 監査ログ設定
# ========================================
AUDIT_LOG_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=365
# 監査ログ保持期間（日）

# ========================================
# セキュリティ設定
# ========================================
# セキュリティヘッダー
SECURITY_HEADERS_ENABLED=true

# HSTS（HTTP Strict Transport Security）
HSTS_MAX_AGE=31536000
# 1年 = 31536000秒

# Content Security Policy
# CSP_POLICY="default-src 'self'"

# ========================================
# 外部サービス連携（将来実装）
# ========================================
# Slack通知
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
# SLACK_CHANNEL=#effisio-notifications

# ========================================
# モニタリング設定
# ========================================
# Prometheus メトリクス
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# ヘルスチェック
HEALTH_CHECK_PATH=/health

# ========================================
# マイグレーション設定
# ========================================
MIGRATION_PATH=./migrations
MIGRATION_TABLE=schema_migrations
# マイグレーション履歴テーブル名

# ========================================
# Swagger/OpenAPI設定
# ========================================
SWAGGER_ENABLED=true
SWAGGER_PATH=/swagger
SWAGGER_HOST=localhost:8080
SWAGGER_BASE_PATH=/api/v1

# ========================================
# タイムゾーン設定
# ========================================
TZ=Asia/Tokyo
# または UTC

# ========================================
# デバッグ設定（開発環境のみ）
# ========================================
DEBUG=false
# true にするとスタックトレースが詳細に表示されます

PROFILING_ENABLED=false
# Go pprof プロファイリング有効化

# ========================================
# テスト環境設定
# ========================================
# TEST_DB_NAME=effisio_test
# TEST_PARALLEL=4
# 並列テスト実行数
